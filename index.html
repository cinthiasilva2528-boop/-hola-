<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Control de H√°bitos</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#F9F9F9">

<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">

<style>
:root{
  --white:#F9F9F9;
  --light-gray:#E8E8E8;
  --medium-gray:#A0A0A0;
  --dark-gray:#333333;
  --accent:#333333; 
}

body{
  margin:0;
  font-family:'Roboto',sans-serif;
  background:var(--light-gray);
  color:var(--dark-gray);
}

h1{
  text-align:center;
  margin:30px 0 20px;
  font-weight:500;
  font-size:1.8rem;
}

.container{
  max-width:600px;
  margin:auto;
  padding:0 15px;
}

.section{
  background:var(--white);
  border-radius:12px;
  padding:20px;
  margin-bottom:20px;
  box-shadow:0 4px 8px rgba(0,0,0,.05);
}

h2{
  font-size:1.4rem;
  border-bottom:1px solid var(--light-gray);
  padding-bottom:10px;
  margin-top:0;
}

.task{
  margin-bottom:15px;
  border-bottom:1px dashed var(--light-gray);
  padding-bottom:10px;
}

.task label{
  display:flex;
  align-items:center;
  cursor:pointer;
  font-size:1rem;
}

.task input{
  appearance:none;
  width:18px;
  height:18px;
  border:2px solid var(--medium-gray);
  border-radius:4px;
  margin-right:15px;
  cursor:pointer;
  transition:all .2s;
  flex-shrink: 0;
}

.task input:checked{
  background-color:var(--accent);
  border-color:var(--accent);
  position:relative;
}

.task input:checked::after{
  content:'\2713'; /* Checkmark simple */
  color:var(--white);
  font-size:12px;
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
}

.task input:checked + span{
  text-decoration:none; /* Minimalismo: eliminamos el tachado */
  opacity:.6;
  font-style:italic;
}

.desc{
  margin-top:5px;
  margin-left:32px;
  font-size:.85rem;
  color:var(--medium-gray);
  padding:0 5px;
  display:none;
}

.task label:hover + .desc{
  display:block;
}

/* ESTILOS MINIMALISTAS DE BARRA DE PROGRESO */
.progress-bar{
  background:var(--light-gray);
  border-radius:10px;
  overflow:hidden;
  height:16px; 
  margin-top:15px;
}

.progress-fill{
  height:100%;
  width:0%;
  background:var(--accent);
  transition:width .4s ease;
}

.reward{
  text-align:center;
  padding:15px;
  border-radius:8px;
  font-size:1rem;
  border:2px solid var(--medium-gray);
}

.locked{opacity:.4; background:var(--light-gray);}
.unlocked{
    background:var(--accent);
    color:var(--white);
    border-color:var(--accent);
    font-weight: 500;
}

.reset-btn{
  position:fixed;
  top:20px;
  right:20px;
  border:none;
  border-radius:50%;
  background:var(--white);
  padding:10px;
  font-size:18px;
  box-shadow:0 2px 5px rgba(0,0,0,.15);
  cursor:pointer;
  transition:background .2s;
}
</style>
</head>

<body>

<button class="reset-btn" id="reset" title="Reiniciar D√≠a">üîÑ</button>

<h1>Control de H√°bitos</h1>

<div class="container">

<div class="section">
<h2>Rutina Diaria</h2>

<div class="task">
<label><input type="checkbox" class="check"> <span>Rutina Matutina + Postura</span></label>
<div class="desc">Levantarse, ordenar, aseo y ejercicios para corregir la joroba.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Limpieza Ligera del Hogar</span></label>
<div class="desc">Barrer, hacer camas, manejar ropa y ordenar superficies.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Aprender 10 T√©rminos M√©dicos</span></label>
<div class="desc">Bloque de estudio enfocado en vocabulario cl√≠nico.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Aprender 10 Palabras en Ingl√©s</span></label>
<div class="desc">Estudio diario de ingl√©s.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Leer Gu√≠as de Conducci√≥n</span></label>
<div class="desc">Lectura te√≥rica para licencia.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Cocinar Almuerzo</span></label>
<div class="desc">Preparar comida del d√≠a.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Lavar Losa Inmediato</span></label>
<div class="desc">H√°bito anti-flojera: nada de losa acumulada.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Ducha Diaria</span></label>
<div class="desc">Debe realizarse antes de las 17:00.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Estudio Fuerte (Fisio / Qu√≠mica)</span></label>
<div class="desc">Bloque de m√°xima concentraci√≥n.</div>
</div>

<div class="progress-bar">
<div class="progress-fill" id="progress"></div>
</div>
</div>

<div class="section">
<h2>Rutina Nocturna</h2>

<div class="task">
<label><input type="checkbox" class="check"> <span>Once Familiar</span></label>
<div class="desc">Compartir tiempo con la familia.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Lavar y Despejar Cocina</span></label>
<div class="desc">Dejar la cocina impecable, cero losa.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Repaso Fisio / Qu√≠mica</span></label>
<div class="desc">Videos y refuerzo tipo ‚Äúal fin entend√≠‚Äù.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Cepillado Nocturno</span></label>
<div class="desc">√öltimo cepillado del d√≠a.</div>
</div>
</div>

<div class="section reward locked" id="reward">
üé¨ RECOMPENSA DE DORAMAS<br>
Se desbloquea al 80%
</div>

</div>

<script>
const checks=document.querySelectorAll('.check');
const progress=document.getElementById('progress');
const reward=document.getElementById('reward');
const reset=document.getElementById('reset');

const KEY='tasks',DATE='date';

function today(){return new Date().toISOString().split('T')[0];}

function load(){
 // Revisa si la fecha es nueva y resetea
 if(localStorage.getItem(DATE)!==today()){
   localStorage.setItem(KEY,JSON.stringify([]));
   localStorage.setItem(DATE,today());
 }
 const data=JSON.parse(localStorage.getItem(KEY))||[];
 checks.forEach((c,i)=>c.checked=data[i]||false);
 update();
}

function save(){
 localStorage.setItem(KEY,JSON.stringify([...checks].map(c=>c.checked)));
}

function update(){
 const total=checks.length;
 const done=[...checks].filter(c=>c.checked).length;
 const percent=Math.round(done/total*100);
 progress.style.width=percent+'%';

 if(percent>=80){
   reward.classList.remove('locked');
   reward.classList.add('unlocked');
   reward.innerHTML='üéâ DORAMAS DESBLOQUEADOS';
 }else{
   reward.classList.add('locked');
   reward.classList.remove('unlocked');
   reward.innerHTML='üé¨ RECOMPENSA DE DORAMAS<br>80% requerido';
 }
 save();
}

reset.onclick=()=>{
 if(confirm('¬øReiniciar progreso del d√≠a?')){
   checks.forEach(c=>c.checked=false);
   update();
 }
};

checks.forEach(c=>c.onchange=update);
load();

// Registro del Service Worker para PWA (Funciona offline)
if('serviceWorker' in navigator){
 navigator.serviceWorker.register('service-worker.js');
}
</script>

</body>
</html>
