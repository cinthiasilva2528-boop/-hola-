<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mi Jueguito de HÃ¡bitos</title>

<!-- PWA bÃ¡sico -->
<link rel="manifest" href="data:application/json,{
  &quot;name&quot;:&quot;Mi Jueguito de HÃ¡bitos&quot;,
  &quot;short_name&quot;:&quot;HÃ¡bitos&quot;,
  &quot;display&quot;:&quot;standalone&quot;,
  &quot;background_color&quot;:&quot;#f9c5d1&quot;,
  &quot;theme_color&quot;:&quot;#f9c5d1&quot;
}">

<style>
:root{
  --rosa:#f9c5d1;
  --rosa2:#fde7ee;
  --card:#fff6f9;
  --texto:#6a4a57;
  --barra:#f3a6bb;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:'Quicksand', system-ui, sans-serif;
  background:var(--rosa);
  color:var(--texto);
}

.app{
  max-width:440px;
  margin:auto;
  padding:16px 14px 120px;
}

header{
  text-align:center;
  font-size:1.7em;
  font-weight:700;
  margin-bottom:14px;
}

.card{
  background:var(--card);
  border-radius:22px;
  padding:16px;
  margin-bottom:14px;
  box-shadow:0 6px 14px rgba(0,0,0,.06);
}

h2{
  margin:0 0 12px;
  font-size:1.1em;
}

.task{
  display:flex;
  gap:10px;
  margin-bottom:10px;
}

.task input{
  transform:scale(1.3);
  margin-top:4px;
}

.task span{
  font-size:.92em;
}

.task small{
  display:block;
  font-size:.75em;
  opacity:.75;
}

.progress{
  height:16px;
  background:var(--barra);
  border-radius:20px;
  overflow:hidden;
}

.fill{
  height:100%;
  width:0%;
  background:white;
  transition:.4s;
}

.reward{
  text-align:center;
  padding:14px;
  border-radius:20px;
  border:2px dashed var(--barra);
  opacity:.35;
  transition:.4s;
}

.reward.unlocked{
  opacity:1;
}

.bunny{
  position:fixed;
  bottom:16px;
  right:16px;
  font-size:64px;
  transition:.3s;
}

.bunny.happy{
  transform:scale(1.2) rotate(-5deg);
}

#reset{
  position:fixed;
  top:10px;
  right:10px;
  background:none;
  border:none;
  font-size:1.4em;
  cursor:pointer;
}

.history li{
  font-size:.85em;
}
</style>
</head>

<body>

<button id="reset" title="Reiniciar dÃ­a">ğŸ’”</button>
<div class="bunny" id="bunny">ğŸ°</div>

<div class="app">
<header>ğŸŒ¸ Mi Jueguito de HÃ¡bitos ğŸŒ¸</header>

<div class="card" id="tasks"></div>

<div class="card">
<h2>ğŸ“Š Progreso diario</h2>
<div class="progress"><div class="fill"></div></div>
</div>

<div class="card reward" id="reward">
ğŸ€ Recompensa desbloqueada<br>
<small>Puedes ver doramas sin culpa ğŸ’–</small>
</div>

<div class="card history">
<h2>ğŸ“… Historial</h2>
<ul id="history"></ul>
</div>
</div>

<script>
// =====================
// TAREAS COMPLETAS
// =====================
const TAREAS = [
  // MAÃ‘ANA
  ["agua1","ğŸ’§ Agua 1/4","Un vaso grande apenas despiertas"],
  ["rutina","ğŸ›ï¸ Rutina matutina","Hacer la cama, ordenar, asearte, vestirte y peinarte"],
  ["dientes_m","ğŸ¦· Cepillado maÃ±ana","Dientes + lengua"],
  ["desayuno","ğŸ Desayuno","Comer tranquila antes de salir"],
  ["agua2","ğŸ’§ Agua 2/4","Segundo vaso antes del almuerzo"],

  // ESTUDIO
  ["clases","ğŸ“š Asistir a clases","Poner atenciÃ³n y tomar apuntes"],
  ["repaso","ğŸ“ Repaso diario","Revisar o resumir lo visto en clases"],

  // EJERCICIO (Lâ€“V)
  ["ejercicio","ğŸ‹ï¸ Ejercicio","Rutina segÃºn el dÃ­a (no sÃ¡b/dom)"],
  ["estiramiento","ğŸ§˜ Estiramiento","5â€“10 min post ejercicio"],

  // TARDE
  ["agua3","ğŸ’§ Agua 3/4","Vaso por la tarde"],
  ["ducha","ğŸš¿ Ducha","Al llegar a casa"],
  ["once","â˜• Once","Comer algo rico y relajarte"],

  // NOCHE
  ["dientes_n","ğŸ¦· Cepillado noche","Dientes + lengua antes de dormir"],
  ["piel","ğŸ§´ Rutina facial","Limpieza + crema"],
  ["agua4","ğŸ’§ Agua 4/4","Ãšltimo vaso del dÃ­a"],
  ["mochila","ğŸ’ Mochila lista","Dejar todo preparado"],
  ["ropa","ğŸ‘• Ropa lista","Elegir outfit del dÃ­a siguiente"],
  ["dormir","ğŸŒ™ Dormir","Irte a la cama a buena hora"]
];

// =====================
// ESTADO
// =====================
const today = new Date().toLocaleDateString();
const tasksDiv = document.getElementById("tasks");
const fill = document.querySelector(".fill");
const bunny = document.getElementById("bunny");
const reward = document.getElementById("reward");

function loadState(){
  if(localStorage.getItem("date") !== today){
    saveHistory();
    localStorage.removeItem("state");
  }
  return JSON.parse(localStorage.getItem("state")||"{}");
}

function saveState(state){
  localStorage.setItem("state", JSON.stringify(state));
  localStorage.setItem("date", today);
}

// =====================
// RENDER
// =====================
function render(){
  const state = loadState();
  tasksDiv.innerHTML = "<h2>â˜€ï¸ Tareas del dÃ­a</h2>";

  TAREAS.forEach(t=>{
    const checked = state[t[0]]||false;
    tasksDiv.innerHTML += `
      <label class="task">
        <input type="checkbox" ${checked?"checked":""} data-id="${t[0]}">
        <span>${t[1]}<small>${t[2]}</small></span>
      </label>
    `;
  });

  update();
}

// =====================
// PROGRESO
// =====================
function update(){
  const checks = document.querySelectorAll("input[type=checkbox]");
  const done = [...checks].filter(c=>c.checked).length;
  const percent = Math.round(done/checks.length*100);
  fill.style.width = percent+"%";
  reward.classList.toggle("unlocked", percent>=80);
}

// =====================
// HISTORIAL
// =====================
function saveHistory(){
  const prev = JSON.parse(localStorage.getItem("history")||"[]");
  const state = JSON.parse(localStorage.getItem("state")||"{}");
  const done = Object.values(state).filter(v=>v).length;
  if(done>0){
    prev.push({date:localStorage.getItem("date"),percent:Math.round(done/TAREAS.length*100)});
    localStorage.setItem("history",JSON.stringify(prev));
  }
}

function loadHistory(){
  const h = JSON.parse(localStorage.getItem("history")||"[]");
  document.getElementById("history").innerHTML =
    h.map(d=>`<li>${d.date} â€” ${d.percent}%</li>`).join("");
}

// =====================
// EVENTOS
// =====================
document.addEventListener("change",e=>{
  if(e.target.matches("input")){
    const state = loadState();
    state[e.target.dataset.id] = e.target.checked;
    saveState(state);
    bunny.classList.add("happy");
    setTimeout(()=>bunny.classList.remove("happy"),300);
    update();
  }
});

document.getElementById("reset").onclick=()=>{
  if(confirm("Â¿Reiniciar el progreso de hoy?")){
    saveHistory();
    localStorage.removeItem("state");
    render();
  }
};

// INIT
render();
loadHistory();
</script>
</body>
</html>
