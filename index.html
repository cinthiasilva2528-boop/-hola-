<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mi Jueguito de H√°bitos</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#FFCCE5"> <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --light-pink:#FFCCE5;
  --medium-pink:#FFADDC;
  --dark-pink:#FF8BC6;
  --text-dark:#604B5F;
  --text-light:#FFFFFF;
  --shadow-pink:rgba(255,173,220,0.3);
}

body{
  margin:0;
  font-family:'Comfortaa',cursive;
  background:linear-gradient(135deg,var(--light-pink) 0%,var(--medium-pink) 100%);
  color:var(--text-dark);
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

h1{
  text-align:center;
  margin:25px 0 20px;
  font-weight:600;
  font-size:2rem;
  color:var(--text-dark);
  text-shadow:1px 1px 2px var(--shadow-pink);
}

.container{
  max-width:700px;
  margin:auto;
  padding:15px;
  flex-grow:1;
}

.section{
  background:var(--text-light);
  border-radius:25px;
  padding:20px;
  margin-bottom:25px;
  box-shadow:0 8px 20px var(--shadow-pink);
  animation:popIn .8s cubic-bezier(0.68, -0.55, 0.27, 1.55) forwards;
}

@keyframes popIn{
  0%{opacity:0;transform:scale(0.8) translateY(20px);}
  100%{opacity:1;transform:scale(1) translateY(0);}
}

h2{
  font-size:1.6rem;
  color:var(--dark-pink);
  border-bottom:2px dashed var(--light-pink);
  padding-bottom:10px;
  margin-top:0;
  text-align:center;
}

.task{
  margin-bottom:15px;
  padding-bottom:10px;
  border-bottom:1px solid var(--light-pink);
}

.task:last-of-type{
  border-bottom:none;
}

.task label{
  display:flex;
  align-items:center;
  cursor:pointer;
  font-size:1.1rem;
  transition:color .2s;
}

.task input{
  appearance:none;
  width:24px;
  height:24px;
  border:2px solid var(--medium-pink);
  border-radius:8px;
  margin-right:15px;
  cursor:pointer;
  transition:all .3s ease;
  flex-shrink: 0;
  position:relative;
}

.task input:checked{
  background-color:var(--dark-pink);
  border-color:var(--dark-pink);
}

.task input:checked::after{
  content:'üíñ'; /* Coraz√≥n en vez de check */
  font-size:16px;
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  line-height:1;
  animation:heartBeat .4s forwards;
}

@keyframes heartBeat{
  0%{transform:translate(-50%,-50%) scale(0.5);opacity:0;}
  70%{transform:translate(-50%,-50%) scale(1.2);opacity:1;}
  100%{transform:translate(-50%,-50%) scale(1);opacity:1;}
}

.task input:checked + span{
  text-decoration:line-through;
  opacity:.7;
  color:var(--medium-gray); /* Para que el texto se vea m√°s suave */
}

.desc{
  margin-top:8px;
  margin-left:39px; /* Alineado con el texto de la tarea */
  font-size:.9rem;
  color:var(--text-dark);
  background:var(--light-pink);
  padding:8px 12px;
  border-radius:15px;
  display:none;
  animation:fadeIn .3s ease;
}

.task label:hover + .desc{
  display:block;
}

/* ESTILOS DE BARRA DE PROGRESO CON CONEJITO ANIMADO */
.progress-bar{
  background:var(--light-pink);
  border-radius:20px;
  overflow:hidden;
  height:40px; 
  margin-top:20px;
  display:flex;
  align-items:center;
  position:relative;
  box-shadow:inset 0 2px 5px rgba(0,0,0,0.1);
}

.progress-fill{
  height:100%;
  width:0%;
  background:var(--dark-pink);
  border-radius:20px;
  transition:width .6s cubic-bezier(0.25, 1, 0.5, 1);
  position:absolute;
  top:0;
  left:0;
}

.bunny-emoji{
  position:absolute;
  left:0%; /* Se mueve con el progreso */
  transform:translateX(-50%); /* Centra el conejito en el porcentaje */
  font-size:28px; /* Tama√±o del conejito */
  z-index:10;
  transition:left .6s cubic-bezier(0.25, 1, 0.5, 1);
}
.bunny-emoji.happy {
    content: 'üê∞'; /* Conejito feliz */
}
.bunny-emoji.super-happy {
    content: 'üêá'; /* Conejito s√∫per feliz, m√°s grande */
}


.reward{
  text-align:center;
  padding:25px;
  border-radius:20px;
  font-size:1.2rem;
  color:var(--text-dark);
  border:3px dashed var(--medium-pink);
  margin-top:30px;
}

.locked{
    opacity:.5;
    background:var(--light-pink);
    filter:grayscale(100%);
}
.unlocked{
    background:var(--dark-pink);
    color:var(--text-light);
    border-color:var(--dark-pink);
    font-weight:600;
    box-shadow:0 0 15px var(--shadow-pink);
    animation:pulse 1.5s infinite alternate;
}

@keyframes pulse{
  0%{transform:scale(1);}
  100%{transform:scale(1.03);}
}

.reset-btn{
  position:fixed;
  top:20px;
  right:20px;
  border:none;
  border-radius:50%;
  background:var(--text-light);
  padding:12px;
  font-size:22px;
  box-shadow:0 4px 10px rgba(0,0,0,.15);
  cursor:pointer;
  transition:transform .2s, background .2s;
  z-index:100;
}

.reset-btn:active{
  transform:scale(0.95);
}
</style>
</head>

<body>

<button class="reset-btn" id="reset" title="Reiniciar D√≠a">üîÑ</button>

<h1>üå∏ Mi Jueguito de H√°bitos üå∏</h1>

<div class="container">

<div class="section">
<h2>‚òÄÔ∏è Rutina Diaria</h2>

<div class="task">
<label><input type="checkbox" class="check"> <span>Rutina Matutina + Postura</span></label>
<div class="desc">Levantarse, ordenar, aseo y ejercicios para corregir la joroba.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Limpieza Ligera del Hogar</span></label>
<div class="desc">Barrer, hacer camas, manejar ropa y ordenar superficies.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Aprender 10 T√©rminos M√©dicos</span></label>
<div class="desc">Bloque de estudio enfocado en vocabulario cl√≠nico.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Aprender 10 Palabras en Ingl√©s</span></label>
<div class="desc">Estudio diario de ingl√©s.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Leer Gu√≠as de Conducci√≥n</span></label>
<div class="desc">Lectura te√≥rica para licencia.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Cocinar Almuerzo</span></label>
<div class="desc">Preparar comida del d√≠a.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Lavar Losa Inmediato</span></label>
<div class="desc">H√°bito anti-flojera: nada de losa acumulada.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Ducha Diaria</span></label>
<div class="desc">Debe realizarse antes de las 17:00.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Estudio Fuerte (Fisio / Qu√≠mica)</span></label>
<div class="desc">Bloque de m√°xima concentraci√≥n.</div>
</div>

<div class="progress-bar">
<div class="progress-fill" id="progress"></div>
<span class="bunny-emoji" id="bunny">üê∞</span> 
</div>
</div>

<div class="section">
<h2>üåô Rutina Nocturna</h2>

<div class="task">
<label><input type="checkbox" class="check"> <span>Once Familiar</span></label>
<div class="desc">Compartir tiempo con la familia.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Lavar y Despejar Cocina</span></label>
<div class="desc">Dejar la cocina impecable, cero losa.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Repaso Fisio / Qu√≠mica</span></label>
<div class="desc">Videos y refuerzo tipo ‚Äúal fin entend√≠‚Äù.</div>
</div>

<div class="task">
<label><input type="checkbox" class="check"> <span>Cepillado Nocturno</span></label>
<div class="desc">√öltimo cepillado del d√≠a.</div>
</div>
</div>

<div class="section reward locked" id="reward">
üé¨ RECOMPENSA DE DORAMAS<br>
Se desbloquea al 80%
</div>

</div>

<script>
const checks=document.querySelectorAll('.check');
const progress=document.getElementById('progress');
const reward=document.getElementById('reward');
const reset=document.getElementById('reset');
const bunny=document.getElementById('bunny'); // Referencia al conejito

const KEY='tasks',DATE='date';

function today(){return new Date().toISOString().split('T')[0];}

function load(){
 if(localStorage.getItem(DATE)!==today()){
   localStorage.setItem(KEY,JSON.stringify([]));
   localStorage.setItem(DATE,today());
 }
 const data=JSON.parse(localStorage.getItem(KEY))||[];
 checks.forEach((c,i)=>c.checked=data[i]||false);
 update();
}

function save(){
 localStorage.setItem(KEY,JSON.stringify([...checks].map(c=>c.checked)));
}

function update(){
 const total=checks.length;
 const done=[...checks].filter(c=>c.checked).length;
 const percent=Math.round(done/total*100);
 progress.style.width=percent+'%';

 // Mover el conejito
 bunny.style.left = `calc(${percent}% - 15px)`; // Ajuste para centrarlo

 // Cambiar la expresi√≥n del conejito
 if (percent < 50) {
    bunny.textContent = 'üê∞'; // Normal
 } else if (percent < 80) {
    bunny.textContent = 'üòä'; // Sonriendo
 } else {
    bunny.textContent = 'üíñ'; // Feliz con coraz√≥n
 }


 if(percent>=80){
   reward.classList.remove('locked');
   reward.classList.add('unlocked');
   reward.innerHTML='üéâ DORAMAS DESBLOQUEADOS üíñ';
 }else{
   reward.classList.add('locked');
   reward.classList.remove('unlocked');
   reward.innerHTML='üé¨ RECOMPENSA DE DORAMAS<br>80% requerido';
 }
 save();
}

reset.onclick=()=>{
 if(confirm('¬øReiniciar progreso del d√≠a?')){
   checks.forEach(c=>c.checked=false);
   update();
 }
};

checks.forEach(c=>c.onchange=update);
load();

if('serviceWorker' in navigator){
 navigator.serviceWorker.register('service-worker.js');
}
</script>

</body>
</html>
